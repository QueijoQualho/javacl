DROP TABLE IF EXISTS PAGAMENTO;
DROP TABLE IF EXISTS CONTRATO;
DROP TABLE IF EXISTS EMPRESA_CLIENTE;
DROP TABLE IF EXISTS REPRESENTANTE;
DROP TABLE IF EXISTS FUNCIONARIO;
DROP TABLE IF EXISTS PLANO;
DROP TABLE IF EXISTS PRODUTO;
DROP TABLE IF EXISTS FUNCIONARIO_CONTRATO;

CREATE TABLE Funcionario (
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    nome VARCHAR(255) NOT NULL,
    telefone VARCHAR(15),
    email VARCHAR(255) NOT NULL,
    cpf VARCHAR(14) UNIQUE NOT NULL,
    cargo VARCHAR(255) NOT NULL,
    senha VARCHAR(255) NOT NULL,
    salario DOUBLE NOT NULL,
    endereco_id INT,
    FOREIGN KEY (endereco_id) REFERENCES Endereco(id)
);

CREATE TABLE Cliente (
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    nome VARCHAR(255) NOT NULL,
    telefone VARCHAR(15),
    email VARCHAR(255) NOT NULL,
    cpf VARCHAR(14) UNIQUE NOT NULL,
    cargo VARCHAR(255) NOT NULL,
    senha VARCHAR(255) NOT NULL,
    endereco_id INT,
    FOREIGN KEY (endereco_id) REFERENCES Endereco(id)
);

CREATE TABLE Produto (
    id INT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    preco DOUBLE NOT NULL
);

CREATE TABLE EmpresaCliente (
    id INT PRIMARY KEY  GENERATED BY DEFAULT AS IDENTITY,
    representante_id INT,
    cnpj VARCHAR(18) UNIQUE NOT NULL,
    telefone VARCHAR(15),
    razaoSocial VARCHAR(255) NOT NULL,
    nomeFantasia VARCHAR(255) NOT NULL,
    tamanho INT,
    FOREIGN KEY (representante_id) REFERENCES Cliente(id)
);

CREATE TABLE Endereco (
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    rua VARCHAR(255) NOT NULL,
    numero VARCHAR(10) NOT NULL,
    cidade VARCHAR(255) NOT NULL,
    estado VARCHAR(255) NOT NULL,
    cep VARCHAR(10) NOT NULL
);

CREATE TABLE Plano (
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    nomeFantasia VARCHAR(255) NOT NULL,
    dataInicio DATE NOT NULL,
    dataFinal DATE NOT NULL,
    valor DOUBLE NOT NULL,
    produto_id INT,
    FOREIGN KEY (produto_id) REFERENCES Produto(id)
);

CREATE TABLE Contrato (
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    funcionario_id INT,
    empresa_cliente_id INT,
    plano_id INT,
    FOREIGN KEY (funcionario_id) REFERENCES Funcionario(id),
    FOREIGN KEY (empresa_cliente_id) REFERENCES EmpresaCliente(id),
    FOREIGN KEY (plano_id) REFERENCES Plano(id)
);

